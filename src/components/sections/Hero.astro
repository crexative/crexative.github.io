---
import { useTranslations } from '../../i18n';
import { CONTACT_INFO } from '../../config/site.config';

interface Props {
  lang: string;
}

const { lang } = Astro.props;
const t = useTranslations(lang as 'en' | 'es');

const whatsappMessage = encodeURIComponent(t('contact.whatsappMessage'));
const whatsappLink = `https://wa.me/${CONTACT_INFO.whatsapp}?text=${whatsappMessage}`;

const stats = lang === 'es'
  ? [
      { value: '5+', label: 'Años de experiencia' },
      { value: '20+', label: 'Proyectos entregados' },
      { value: '3', label: 'Países atendidos' },
    ]
  : [
      { value: '5+', label: 'Years of experience' },
      { value: '20+', label: 'Projects delivered' },
      { value: '3', label: 'Countries served' },
    ];
---

<section class="hero" itemscope itemtype="https://schema.org/Organization">
  <!-- Background atmospheric layers -->
  <div class="hero-backdrop" aria-hidden="true">
    <div class="dot-grid"></div>
    <div class="glow-teal"></div>
    <div class="glow-lime"></div>
  </div>

  <!-- Right-side geometric decoration -->
  <div class="hero-visual" aria-hidden="true">
    <svg class="geo-svg" viewBox="0 0 480 480" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Axis lines -->
      <line x1="0" y1="240" x2="480" y2="240" stroke="rgba(0,225,198,0.06)" stroke-width="1"/>
      <line x1="240" y1="0" x2="240" y2="480" stroke="rgba(0,225,198,0.06)" stroke-width="1"/>
      <!-- Outer ring - slow rotating dashes -->
      <circle cx="240" cy="240" r="210" stroke="rgba(0,225,198,0.07)" stroke-width="1" stroke-dasharray="6 14"/>
      <!-- Mid ring -->
      <circle cx="240" cy="240" r="150" stroke="rgba(0,225,198,0.1)" stroke-width="1" stroke-dasharray="4 10"/>
      <!-- Inner accent ring -->
      <circle cx="240" cy="240" r="90" stroke="rgba(204,254,18,0.15)" stroke-width="1.5"/>
      <!-- Core ring -->
      <circle cx="240" cy="240" r="40" stroke="rgba(204,254,18,0.35)" stroke-width="1.5"/>
      <!-- Center dot -->
      <circle cx="240" cy="240" r="5" fill="#CCFE12" opacity="0.9"/>
      <!-- Compass marks -->
      <circle cx="240" cy="30" r="3" fill="rgba(0,225,198,0.4)"/>
      <circle cx="240" cy="450" r="3" fill="rgba(0,225,198,0.4)"/>
      <circle cx="30" cy="240" r="3" fill="rgba(0,225,198,0.4)"/>
      <circle cx="450" cy="240" r="3" fill="rgba(0,225,198,0.4)"/>
      <!-- Diagonal accent lines -->
      <line x1="90" y1="90" x2="150" y2="150" stroke="rgba(204,254,18,0.08)" stroke-width="1"/>
      <line x1="390" y1="90" x2="330" y2="150" stroke="rgba(204,254,18,0.08)" stroke-width="1"/>
      <line x1="90" y1="390" x2="150" y2="330" stroke="rgba(204,254,18,0.08)" stroke-width="1"/>
      <line x1="390" y1="390" x2="330" y2="330" stroke="rgba(204,254,18,0.08)" stroke-width="1"/>
    </svg>
    <div class="geo-number" aria-hidden="true">01</div>
  </div>

  <!-- Main layout -->
  <div class="hero-main">
    <div class="hero-content">
      <!-- Eyebrow label -->
      <div class="eyebrow">
        <span class="eyebrow-bar" aria-hidden="true"></span>
        <span>{lang === 'es' ? 'Agencia de Desarrollo de Software' : 'Software Development Agency'}</span>
      </div>

      <!-- Heading -->
      <h1 itemprop="name">
        {lang === 'es' ? (
          <>
            Tecnología que<br/>
            <em class="accent-em">impulsa</em> tu<br/>
            negocio
          </>
        ) : (
          <>
            Technology that<br/>
            <em class="accent-em">drives</em> your<br/>
            business
          </>
        )}
      </h1>

      <!-- Description -->
      <p class="hero-desc" itemprop="description">
        {t('hero.description')}
      </p>

      <!-- CTA -->
      <a href={whatsappLink} target="_blank" rel="noopener noreferrer" class="hero-cta">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
        </svg>
        {lang === 'es' ? 'Chatea con nosotros' : 'Chat with us'}
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </a>
    </div>
  </div>

  <!-- Stats bar -->
  <div class="hero-stats">
    <div class="stats-inner">
      {stats.map((stat, i) => (
        <>
          <div class="stat-item">
            <span class="stat-value">{stat.value}</span>
            <span class="stat-label">{stat.label}</span>
          </div>
          {i < stats.length - 1 && <div class="stat-sep" aria-hidden="true"></div>}
        </>
      ))}
    </div>
  </div>
</section>

<style>
  /* ─── Section shell ──────────────────────────────────────── */
  .hero {
    min-height: 100vh;
    position: relative;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: #050508;
  }

  /* ─── Atmospheric background ─────────────────────────────── */
  .hero-backdrop {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0;
  }

  .dot-grid {
    position: absolute;
    inset: 0;
    background-image: radial-gradient(circle, rgba(255,255,255,0.055) 1px, transparent 1px);
    background-size: 30px 30px;
    mask-image: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.6) 15%, black 50%, rgba(0,0,0,0.6) 85%, transparent 100%);
  }

  .glow-teal {
    position: absolute;
    right: 5%;
    top: 15%;
    width: 640px;
    height: 640px;
    background: radial-gradient(circle, rgba(0,225,198,0.065) 0%, transparent 65%);
    border-radius: 50%;
  }

  .glow-lime {
    position: absolute;
    left: -8%;
    bottom: 5%;
    width: 420px;
    height: 420px;
    background: radial-gradient(circle, rgba(204,254,18,0.04) 0%, transparent 65%);
    border-radius: 50%;
  }

  /* ─── Geometric decoration ───────────────────────────────── */
  .hero-visual {
    position: absolute;
    right: -2%;
    top: 50%;
    transform: translateY(-50%);
    width: 540px;
    height: 540px;
    pointer-events: none;
    z-index: 1;
  }

  .geo-svg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    animation: slowSpin 80s linear infinite;
  }

  @keyframes slowSpin {
    from { transform: rotate(0deg); }
    to   { transform: rotate(360deg); }
  }

  .geo-number {
    position: absolute;
    bottom: 16px;
    left: 8px;
    font-family: 'Syne', 'Poppins', sans-serif;
    font-weight: 800;
    font-size: 140px;
    line-height: 1;
    color: rgba(255,255,255,0.018);
    letter-spacing: -0.04em;
    user-select: none;
    pointer-events: none;
  }

  /* ─── Main layout ─────────────────────────────────────────── */
  .hero-main {
    flex: 1;
    display: flex;
    align-items: center;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    padding-top: 100px;
    position: relative;
    z-index: 2;
  }

  .hero-content {
    max-width: 660px;
  }

  /* ─── Eyebrow ─────────────────────────────────────────────── */
  .eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 14px;
    font-family: 'Poppins', sans-serif;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: rgba(255,255,255,0.4);
    margin-bottom: 36px;
  }

  .eyebrow-bar {
    display: block;
    width: 36px;
    height: 1px;
    background: var(--color-lime);
    flex-shrink: 0;
  }

  /* ─── Heading ─────────────────────────────────────────────── */
  h1 {
    font-family: 'Syne', 'Poppins', sans-serif;
    font-weight: 800;
    font-size: 76px;
    line-height: 1.04;
    letter-spacing: -0.03em;
    color: #ffffff;
    margin-bottom: 28px;
  }

  .accent-em {
    font-style: italic;
    color: var(--color-lime);
    position: relative;
    display: inline-block;
  }

  .accent-em::after {
    content: '';
    position: absolute;
    bottom: 2px;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--color-lime);
    opacity: 0.35;
    border-radius: 1px;
  }

  /* ─── Description ─────────────────────────────────────────── */
  .hero-desc {
    font-family: 'Poppins', sans-serif;
    font-size: 18px;
    line-height: 1.8;
    color: rgba(255,255,255,0.55);
    margin-bottom: 48px;
    font-weight: 300;
    max-width: 520px;
  }

  /* ─── CTA button ──────────────────────────────────────────── */
  .hero-cta {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    background: var(--color-lime);
    color: #000000;
    padding: 16px 32px;
    border-radius: 8px;
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    font-size: 16px;
    text-decoration: none;
    transition: background 0.25s ease, transform 0.25s ease, box-shadow 0.25s ease;
  }

  .hero-cta:hover {
    background: #b8e510;
    transform: translateY(-3px);
    box-shadow: 0 14px 36px rgba(204,254,18,0.22);
  }

  /* ─── Stats bar ───────────────────────────────────────────── */
  .hero-stats {
    position: relative;
    z-index: 2;
    border-top: 1px solid rgba(255,255,255,0.07);
  }

  .stats-inner {
    display: flex;
    align-items: center;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .stat-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 28px 40px;
  }

  .stat-item:first-child {
    padding-left: 0;
  }

  .stat-value {
    font-family: 'Syne', 'Poppins', sans-serif;
    font-weight: 800;
    font-size: 34px;
    color: var(--color-lime);
    line-height: 1;
    letter-spacing: -0.02em;
  }

  .stat-label {
    font-family: 'Poppins', sans-serif;
    font-size: 12px;
    color: rgba(255,255,255,0.38);
    font-weight: 400;
    letter-spacing: 0.04em;
    text-transform: uppercase;
  }

  .stat-sep {
    width: 1px;
    height: 36px;
    background: rgba(255,255,255,0.09);
    flex-shrink: 0;
  }

  /* ─── Light mode ──────────────────────────────────────────── */
  :global([data-theme="light"]) .hero {
    background: #f4f4f7;
  }

  :global([data-theme="light"]) .dot-grid {
    background-image: radial-gradient(circle, rgba(0,0,0,0.07) 1px, transparent 1px);
  }

  :global([data-theme="light"]) h1 {
    color: #08080f;
  }

  :global([data-theme="light"]) .eyebrow {
    color: rgba(0,0,0,0.38);
  }

  :global([data-theme="light"]) .hero-desc {
    color: rgba(0,0,0,0.55);
  }

  :global([data-theme="light"]) .hero-stats {
    border-top-color: rgba(0,0,0,0.08);
  }

  :global([data-theme="light"]) .stat-label {
    color: rgba(0,0,0,0.38);
  }

  :global([data-theme="light"]) .stat-sep {
    background: rgba(0,0,0,0.1);
  }

  :global([data-theme="light"]) .glow-teal {
    background: radial-gradient(circle, rgba(0,225,198,0.09) 0%, transparent 65%);
  }

  :global([data-theme="light"]) .glow-lime {
    background: radial-gradient(circle, rgba(150,200,0,0.07) 0%, transparent 65%);
  }

  :global([data-theme="light"]) .geo-number {
    color: rgba(0,0,0,0.025);
  }

  /* ─── Responsive ──────────────────────────────────────────── */
  @media (max-width: 1200px) {
    .hero-visual {
      width: 440px;
      height: 440px;
      opacity: 0.55;
    }

    h1 { font-size: 66px; }
  }

  @media (max-width: 1024px) {
    .hero-visual {
      width: 360px;
      height: 360px;
      opacity: 0.35;
      right: -5%;
    }

    h1 { font-size: 58px; }
  }

  @media (max-width: 768px) {
    .hero {
      min-height: auto;
    }

    .hero-visual { display: none; }

    .hero-main {
      padding-top: 130px;
      padding-bottom: 60px;
    }

    .hero-content {
      max-width: 100%;
      text-align: center;
    }

    .eyebrow { justify-content: center; }

    h1 { font-size: 46px; }

    .hero-desc {
      font-size: 16px;
      max-width: 100%;
    }

    .hero-cta {
      width: 100%;
      justify-content: center;
    }

    .stats-inner { justify-content: center; }

    .stat-item {
      padding: 24px 28px;
      align-items: center;
      text-align: center;
    }

    .stat-value { font-size: 28px; }
  }

  @media (max-width: 480px) {
    h1 { font-size: 36px; }

    .stats-inner {
      flex-wrap: wrap;
      gap: 8px;
      padding: 20px;
    }

    .stat-sep { display: none; }

    .stat-item {
      flex: 1;
      min-width: 100px;
      padding: 12px 8px;
    }

    .stat-value { font-size: 26px; }
  }

  @media (prefers-reduced-motion: reduce) {
    .geo-svg { animation: none; }
  }
</style>
